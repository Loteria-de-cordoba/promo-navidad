<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Compra - El Centro est√° de Fiesta</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            min-height: 100vh;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px 0 rgba(30, 58, 138, 0.3);
        }

        .input-field {
            transition: all 0.3s ease;
        }

        .input-field:focus {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .btn-submit {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            transition: all 0.3s ease;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(220, 38, 38, 0.5);
        }

        .btn-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid white;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-left: 10px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .success-box {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
        }

        .error-box {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .section-border {
            border-color: #3b82f6;
        }

        .hidden {
            display: none;
        }

        .radio-card {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid #e5e7eb;
        }

        .radio-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
        }

        .radio-card.selected {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }

        input[type="radio"] {
            accent-color: #3b82f6;
        }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-hidden {
            display: none;
        }

        .btn-accept {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            transition: all 0.3s ease;
        }

        .btn-accept:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.5);
        }

        .btn-accept:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Shake animation for validation errors */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-10px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(10px);
            }
        }

        /* Loading Overlay Styles */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
        }

        .loading-content {
            text-align: center;
            background: white;
            padding: 3rem 4rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease-in;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid #e5e7eb;
            border-top: 5px solid #3b82f6;
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
        }

        .loading-subtext {
            font-size: 1rem;
            color: #6b7280;
        }
    </style>
</head>

<body class="p-4 md:p-8">
    <!-- Modal de Premios -->
    <div id="prizesModal" class="modal-overlay">
        <div class="modal-content">
            <!-- Imagen de Premios PRIMERO -->
            <div class="mb-6">
                <img src="assets/bancor.png" alt="Premios del Sorteo" class="w-full rounded-lg shadow-lg">
            </div>

            <!-- T√≠tulo y descripci√≥n -->
            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold text-blue-900 mb-2">¬°Gracias por Participar!</h2>
                <p class="text-gray-700 text-lg font-semibold">La carga del sorteo ya est√° cerrada.</p>
                <p class="text-gray-700 mt-4">Nos vemos el <strong>26/12/2025 a las 20 hs</strong> para el sorteo de los
                    premios.</p>
            </div>

            <!-- Informaci√≥n del Sorteo -->
            <div class="bg-blue-50 p-6 rounded-lg mb-6">
                <h3 class="font-bold text-lg text-blue-900 mb-3">üìÖ Informaci√≥n del Sorteo</h3>
                <p class="text-gray-700 mb-2"><strong>Fecha:</strong> 26 de Diciembre de 2025</p>
                <p class="text-gray-700 mb-2"><strong>Hora:</strong> 20:00 hs</p>
                <p class="text-gray-700"><strong>Lugar:</strong> Loter√≠a de C√≥rdoba Casa Central - 27 de Abril 185</p>
            </div>

            <button onclick="window.location.reload()"
                class="btn-accept w-full text-white font-bold py-4 px-6 rounded-lg text-lg">
                ‚úÖ Aceptar
            </button>

            <!-- Logo de Loter√≠a de C√≥rdoba -->
            <div class="mt-6 flex justify-center">
                <img src="assets/LDC Logotipo COLOR Vertical 300dpi.png" alt="Loter√≠a de C√≥rdoba" class="h-16 md:h-20">
            </div>
        </div>
    </div>

    <!-- Modal de T√©rminos y Condiciones -->
    <div id="termsModal" class="modal-overlay modal-hidden">
        <div class="modal-content">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4">üìã</div>
                <h2 class="text-3xl font-bold text-blue-900 mb-2">T√©rminos y Condiciones</h2>
                <p class="text-gray-600">Por favor, le√© y acept√° los t√©rminos antes de continuar</p>
            </div>

            <div class="bg-gray-50 p-6 rounded-lg mb-6 max-h-96 overflow-y-auto">
                <ol class="space-y-3 text-gray-700 text-xs list-decimal list-inside">
                    <li>Participar√°n de los presentes sorteos denominados "SORTEOS PROMOCIONALES "EL CENTRO EST√Å DE
                        FIESTA" en adelante la "Promoci√≥n", organizada por Gobierno de la Provincia de C√≥rdoba,
                        Municipalidad de C√≥rdoba, Loter√≠a de la Provincia de C√≥rdoba S.A.U., Bancor y la C√°mara de
                        Comercio de C√≥rdoba (en adelante los "Organizadores"), las personas mayores de 18 a√±os de edad
                        que entre los d√≠as 09 y 25 de diciembre de 2025 adquieran productos en cualquiera de los
                        comercios y agencias oficiales de Loter√≠a de la Provincia de C√≥rdoba participantes de la
                        promoci√≥n y cuyos tickets/factura de compra alcancen o superen los $25.000 (pesos veinticinco
                        mil) para el caso de los comercios y tickets iguales o mayores a $5.000 (pesos cinco mil) para
                        el caso de las agencias oficiales, en adelante los "Participantes".</li>
                    <li><strong>Los comercios y agencias oficiales participantes, circunscriptos en el √°rea
                            denominada centro de
                            la ciudad de C√≥rdoba, se encuentran informados en la p√°gina web www.loteriadecordoba.com.ar
                            y
                            contar√°n para su identificaci√≥n y localizaci√≥n con piezas gr√°ficas expuestas informando la
                            promoci√≥n.</strong></li>
                    <li>Para participar en los Sorteos, los "Participantes" que cumplan con los requisitos informados en
                        el punto 1, deber√°n escanear un c√≥digo QR (provisto por el comercio o agencia oficial en el que
                        realizaron la compra o apuesta) el cual los dirigir√° al formulario virtual a completar con los
                        siguientes datos (Nombre, Apellido, DNI, fecha de nacimiento, Tel√©fono, e-mail, fecha de la
                        compra, CUIT del comercio, N¬∫ de ticket/apuesta, monto del ticket/factura, nombre del comercio
                        donde realizo la compra y carga de fotograf√≠a del ticket/factura). Se aceptar√° la carga de UN
                        (1) s√≥lo formulario virtual por cada ticket/factura que cumpla con los requisitos informados en
                        el punto 1.<br>Si el pago se del ticket/factura se realiza por alguno de los medios de pago de
                        Bancor, el formulario correspondiente tendr√° doble chance.<br>Los formularios que no contengan
                        todos los datos requeridos, los mismos sean err√≥neos o no cumplan con los requisitos informados
                        en el punto 1, ser√°n considerados nulos.</li>
                    <li>La participaci√≥n en la Promoci√≥n implica conocimiento y aceptaci√≥n sin reservas de estos
                        t√©rminos y condiciones (en adelante las "Bases"), los cuales regir√°n la totalidad de las
                        relaciones entre cada Participante y los Organizadores en relaci√≥n a la Promoci√≥n.</li>
                    <li>El sorteo se llevar√° a cabo a las 20:00 horas del d√≠a 26 de diciembre de 2025 en el sal√≥n de
                        sorteos de Loter√≠a de la Provincia de C√≥rdoba S.A.U con domicilio en calle 27 de Abril 185,
                        Ciudad de C√≥rdoba. En el mismo se obtendr√° 1 (un) ganador y 4 (cuatro) suplentes por cada uno de
                        los sorteos realizados, para el caso que el ganador no cumpla los requisitos necesarios para la
                        adjudicaci√≥n del premio el mismo pasar√° al primer suplente y as√≠ sucesivamente. La modalidad de
                        sorteo ser√° por m√©todo de sistema de b√∫squeda aleatoria de ganadores "Random".</li>
                    <li>El resultado del sorteo se comunicar√° en la p√°gina web oficial de Loter√≠a de la Provincia de
                        C√≥rdoba S.A.U. (www.loteriadecordoba.com.ar). Para acceder al premio, deber√°n presentarse los
                        Participantes ganadores en d√≠a y lugar indicado en el punto 14 de las presentes Bases, con sus
                        correspondientes DNI y ticket/factura de compra o apuesta informado.</li>
                    <li>Premios: primer premio un Autom√≥vil marca Fiat modelo Cronos Like 1.3 MT; segundo premio una
                        motocicleta marca Motomel modelo Blitz 110; tercer premio un monopat√≠n el√©ctrico.</li>
                    <li>Los Ganadores y los Suplentes ser√°n notificados por los Organizadores una vez concluido el
                        sorteo.</li>
                    <li>El Premio no incluye ning√∫n otro concepto, bienes o servicios distintos o adicionales al
                        enunciado espec√≠ficamente. El Premio es intransferible, y no podr√° exigirse su canje por dinero
                        o por cualquier otro elemento.</li>
                    <li>Los Organizadores se reservan el derecho, a su exclusivo criterio, de efectuar filmaciones y/o
                        sesi√≥n de fotos protagonizadas por los Participantes (en adelante "las Producciones") y de
                        publicar en la p√°gina web de los Organizadores y/o en cualquier otro medio.</li>
                    <li>Todo Participante, por el mero hecho de participar en la Promoci√≥n autoriza a los Organizadores
                        a utilizar y/o difundir su nombre, documento, datos personales, voz e imagen, ya sean videos o
                        fotograf√≠as en los medios, soportes y formas que los Organizadores y/o quien √©stos designen,
                        consideren convenientes. En virtud de esta autorizaci√≥n El Ganador no tendr√° derecho a
                        indemnizaci√≥n, pago o contraprestaci√≥n alguna por la difusi√≥n y/o utilizaci√≥n mencionada
                        precedentemente. La informaci√≥n concerniente a cada Participante, ser√° almacenada por los
                        Organizadores.</li>
                    <li>Cualquier tributo, derecho u obligaci√≥n aplicable como consecuencia de la participaci√≥n de un
                        Participante en la Promoci√≥n, o la aceptaci√≥n o entrega del Premio estar√° a cargo del
                        Participante.</li>
                    <li>Los Organizadores se reservan el derecho exclusivo de realizar la acci√≥n publicitaria, de
                        prensa, promoci√≥n, publicaci√≥n y difusi√≥n que consideren conveniente del Ganador de la
                        Promoci√≥n.</li>
                    <li>Los ganadores deber√°n presentarse en la sede de Loter√≠a de la Provincia de C√≥rdoba S.A.U. cita
                        en calle 27 de abril 185 de la ciudad de C√≥rdoba y se estipula el d√≠a 26 de enero de 2026 a las
                        13 horas como fecha tope para la presentaci√≥n de documentaci√≥n y dem√°s requisitos. Para hacerse
                        acreedor al premio deber√° el ganador contestar correctamente una pregunta de cultura general
                        ante Escribano P√∫blico en Casa Central √≥ en la Delegaci√≥n correspondiente.</li>
                    <li>La eventual declaraci√≥n de nulidad de alguna de las cl√°usulas de las presentes Bases no
                        importar√° la nulidad de las cl√°usulas restantes, las que mantendr√°n su plena vigencia hasta
                        tanto no sean declaradas nulas por una autoridad facultada por ley a este efecto.</li>
                    <li>Los Organizadores no responder√°n por ning√∫n da√±o o perjuicio que se ocasione a cualquier persona
                        con motivo o debido a la participaci√≥n de la misma en la Promoci√≥n, en cualquier calidad que la
                        misma participe, as√≠ como a cualquier reclamo o da√±o relacionado con cualquier aspecto de la
                        misma, o incluyendo pero sin limitaci√≥n, aquellos da√±os vinculados con el acceso y otorgamiento
                        de cualquiera de los Premios, siempre que dicho da√±o no sea imputable a la exclusiva culpa grave
                        o exclusivo dolo del Organizador.</li>
                    <li>Los Organizadores no ser√° responsable por da√±os, perjuicios o p√©rdidas ocasionados al Ganador o
                        a cualquier otro tercero, en su persona y/o bienes, con motivo o en ocasi√≥n de la aceptaci√≥n,
                        recepci√≥n o utilizaci√≥n del Premio.</li>
                    <li>Los Organizadores no ser√°n responsables por ning√∫n da√±o o perjuicio, de cualquier tipo que
                        fuere, que pudieren sufrir el Ganador o terceros, con motivo de o en relaci√≥n con el uso del
                        Premio. Cualquier reclamo que el Participante tenga derecho a realizar en virtud del
                        producto/servicio adquirido como Premio deber√° ser dirigido exclusivamente contra la persona
                        espec√≠fica que los deba proveer o haya provisto al Participante el producto/servicio respectivo,
                        renunciando el Participante a efectuar cualquier tipo de reclamo contra los Organizadores por
                        cualquier causa vinculada a la calidad del servicio de que se trate.</li>
                    <li>Los Organizadores no se har√°n cargo de ning√∫n gasto de traslado del Ganador desde y hacia el
                        lugar de entrega del premio. Cualquier costo y/o gasto en que los Participantes deban incurrir
                        para participar de la Promoci√≥n y/o para hacerse acreedores del Premio ser√° a su exclusiva
                        cuenta.</li>
                    <li>La participaci√≥n en esta Promoci√≥n implica el total conocimiento y aceptaci√≥n de las Bases as√≠
                        como de las decisiones que adopte los Organizadores con relaci√≥n a cualquier cuesti√≥n no
                        prevista en las Bases.</li>
                    <li>Los Organizadores determinar√°n con car√°cter inapelable, el criterio a aplicar en cualquier
                        situaci√≥n no prevista expresamente en las presentes bases, siendo la √∫nica entidad
                        interpretativa de las mismas, reserv√°ndose los derechos para efectuar cualquier tipo de
                        modificaci√≥n en la realizaci√≥n de la presente Promoci√≥n y de extenderlo o suspenderlo a su solo
                        arbitrio, si as√≠ lo considerara, sin previo aviso y sin derecho a reclamo alguno por parte de
                        los participantes, siendo sus decisiones inapelables.</li>
                    <li>Toda relaci√≥n que en virtud de la Promoci√≥n se genere entre cualquier Participante y los
                        Organizadores ser√° regida y concertada con total sujeci√≥n a las leyes de la Rep√∫blica Argentina,
                        renunciando el Participante a cualquier otra ley a cuya aplicaci√≥n pudiera tener derecho.
                        Asimismo, resultar√°n competentes para dirimir cualquier controversia o procedimiento legal que
                        surja entre el Organizador y el Participante los Tribunales Ordinarios de la Provincia de
                        C√≥rdoba, cualquiera sea la causa de la acci√≥n o el reclamo, con renuncia expresa por parte suya
                        a cualquier otra jurisdicci√≥n que pudiera corresponderle.</li>
                </ol>
            </div>

            <div class="space-y-4">
                <div class="flex items-start p-4 border-2 border-blue-300 rounded-lg bg-blue-50">
                    <input type="checkbox" id="mayorEdadCheck" class="mt-1 mr-3" style="width: 20px; height: 20px;">
                    <label for="mayorEdadCheck" class="cursor-pointer font-semibold text-blue-900">
                        Declaro que soy mayor de 18 a√±os *
                    </label>
                </div>

                <div class="flex items-start p-4 border-2 border-blue-300 rounded-lg bg-blue-50">
                    <input type="checkbox" id="terminosCheck" class="mt-1 mr-3" style="width: 20px; height: 20px;">
                    <label for="terminosCheck" class="cursor-pointer font-semibold text-blue-900">
                        Acepto los t√©rminos y condiciones de la promoci√≥n *
                    </label>
                </div>

                <button id="acceptTermsBtn" disabled
                    class="btn-accept w-full text-white font-bold py-4 px-6 rounded-lg text-lg">
                    ‚úÖ Aceptar y Continuar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Ayuda para N√∫mero OCR -->
    <div id="ocrHelpModal" class="modal-overlay modal-hidden">
        <div class="modal-content max-w-md md:max-w-2xl">
            <div class="text-center mb-4">
                <div class="text-4xl md:text-5xl mb-3">‚ùì</div>
                <h2 class="text-xl md:text-2xl font-bold text-blue-900 mb-2">¬øD√≥nde encuentro el N√∫mero OCR?</h2>
                <p class="text-sm md:text-base text-gray-600">Esta imagen te muestra d√≥nde encontrar el n√∫mero OCR en tu
                    ticket</p>
            </div>

            <div class="mb-4">
                <img src="assets/OCCRAYUDA.png" alt="Ayuda N√∫mero OCR" class="w-full rounded-lg shadow-lg">
            </div>

            <button id="closeOcrHelpBtn"
                class="btn-accept w-full text-white font-bold py-3 px-4 md:py-4 md:px-6 rounded-lg text-base md:text-lg">
                ‚úÖ Entendido
            </button>
        </div>
    </div>

    <!-- Modal de Ayuda para N√∫mero de Agencia -->
    <div id="agenciaHelpModal" class="modal-overlay modal-hidden">
        <div class="modal-content max-w-md md:max-w-2xl">
            <div class="text-center mb-4">
                <div class="text-4xl md:text-5xl mb-3">‚ùì</div>
                <h2 class="text-xl md:text-2xl font-bold text-blue-900 mb-2">¬øD√≥nde encuentro el N√∫mero de Agencia?</h2>
                <p class="text-sm md:text-base text-gray-600">Esta imagen te muestra d√≥nde encontrar el n√∫mero de
                    agencia en tu ticket</p>
            </div>

            <div class="mb-4">
                <img src="assets/AGENCIAAYUDA.png" alt="Ayuda N√∫mero de Agencia" class="w-full rounded-lg shadow-lg">
            </div>

            <button id="closeAgenciaHelpBtn"
                class="btn-accept w-full text-white font-bold py-3 px-4 md:py-4 md:px-6 rounded-lg text-base md:text-lg">
                ‚úÖ Entendido
            </button>
        </div>
    </div>

    <div class="max-w-3xl mx-auto">
        <!-- Header -->
        <div class="mb-8 fade-in">
            <div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-6 mb-4">
                <img src="assets/LDC Logotipo BLANCO+COLOR Vertical 300dpi.png" alt="Loteria de C√≥rdoba"
                    class="h-20 md:h-24">
                <h1 class="text-2xl md:text-4xl font-bold text-white text-center">EL CENTRO EST√Å DE FIESTA</h1>
            </div>
            <div class="text-center">
                <p class="text-white text-lg opacity-90">Complet√° tus datos y particip√° del sorteo</p>
                <p class="text-white text-xl font-semibold mt-3">üéÅ Sorteo: 26 de Diciembre a las 20 hs üéÅ</p>
                <p class="text-white text-md opacity-90 mt-2">üìçTe esperamos en Loter√≠a de C√≥rdoba Casa Central - 27 de
                    Abril 185</p>
            </div>
        </div>

        <!-- Form Container -->
        <div class="glass-effect rounded-2xl p-6 md:p-8 mb-6 fade-in hidden">
            <form id="purchaseForm">
                <!-- Tipo de Compra -->
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-blue-900 mb-4 pb-2 border-b-2 section-border">
                        üõçÔ∏è Comencemos a completar tus datos
                    </h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="radio-card rounded-lg p-6 text-center" id="radioAgencia">
                            <input type="radio" name="tipoCompra" value="agencia" class="mb-3"
                                style="width: 20px; height: 20px;">
                            <div class="text-xl font-bold text-blue-900">üè™ En Agencia</div>
                            <div class="text-sm text-gray-600 mt-2">Seleccion√° si apostaste en una agencia de Loter√≠a
                            </div>
                        </label>

                        <label class="radio-card rounded-lg p-6 text-center" id="radioComercio">
                            <input type="radio" name="tipoCompra" value="comercio" class="mb-3"
                                style="width: 20px; height: 20px;">
                            <div class="text-xl font-bold text-blue-900">üõí En Comercio</div>
                            <div class="text-sm text-gray-600 mt-2">Seleccion√° si compraste en un comercio adherido
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Datos de la Agencia -->
                <div id="seccionAgencia" class="mb-8 hidden">
                    <h2 class="text-2xl font-bold text-blue-900 mb-4 pb-2 border-b-2 section-border">
                        üè™ Apuesta en Agencia
                    </h2>

                    <div class="space-y-4">
                        <div>
                            <label for="ocr" class="block text-sm font-semibold text-gray-700 mb-2">
                                N√∫mero OCR *
                                <button type="button" id="ocrHelpIcon"
                                    class="ml-1 text-blue-600 hover:text-blue-800 transition-colors align-middle"
                                    title="¬øD√≥nde encuentro este dato?">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block"
                                        viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </label>
                            <input type="text" id="ocr" name="ocr" placeholder="1234567890123456" pattern="[0-9]{16}"
                                maxlength="16"
                                class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                            <p class="text-xs text-gray-500 mt-1">16 d√≠gitos</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="nroSucursal" class="block text-sm font-semibold text-gray-700 mb-2">
                                    N√∫mero de Sucursal *
                                </label>
                                <input type="text" id="nroSucursal" name="nroSucursal" value="01 - CASA CENTRAL"
                                    readonly
                                    class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 bg-gray-100 cursor-not-allowed" />
                                <p class="text-xs text-gray-500 mt-1">Sucursal fija</p>
                            </div>

                            <div>
                                <label for="nroAgencia" class="block text-sm font-semibold text-gray-700 mb-2">
                                    N√∫mero de Agencia *
                                    <button type="button" id="agenciaHelpIcon"
                                        class="ml-1 text-blue-600 hover:text-blue-800 transition-colors align-middle"
                                        title="¬øD√≥nde encuentro este dato?">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block"
                                            viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                </label>
                                <input type="text" id="nroAgencia" name="nroAgencia" placeholder="12345"
                                    pattern="[0-9]{1,5}" maxlength="5"
                                    class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                                <p class="text-xs text-gray-500 mt-1">Entre 1 y 5 d√≠gitos</p>
                            </div>
                        </div>

                        <div>
                            <label for="montoAgencia" class="block text-sm font-semibold text-gray-700 mb-2">
                                Monto Total de la Apuesta *
                            </label>
                            <div class="relative">
                                <span class="absolute left-4 top-3 text-gray-600 font-semibold">$</span>
                                <input type="number" id="montoAgencia" name="montoAgencia" min="5000" step="0.01"
                                    placeholder="5000"
                                    class="input-field w-full pl-8 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Monto m√≠nimo para participar: $5.000</p>
                        </div>

                        <div>
                            <label for="ticketAgencia" class="block text-sm font-semibold text-gray-700 mb-2">
                                Foto del Ticket de Agencia *
                            </label>
                            <div class="relative">
                                <input type="file" id="ticketAgencia" name="ticketAgencia" accept="image/*"
                                    class="hidden" onchange="updateFileName(this, 'fileNameAgencia')" />
                                <label for="ticketAgencia"
                                    class="input-field cursor-pointer flex items-center justify-center w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50">
                                    <svg class="w-6 h-6 text-gray-400 mr-2" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z">
                                        </path>
                                    </svg>
                                    <span id="fileNameAgencia" class="text-gray-600">Hac√© clic para subir tu
                                        ticket...</span>
                                </label>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Aceptamos JPG, PNG o WebP (m√°ximo 8 MB)</p>
                        </div>
                    </div>
                </div>

                <!-- Datos del Comercio -->
                <div id="seccionComercio" class="mb-8 hidden">
                    <h2 class="text-2xl font-bold text-blue-900 mb-4 pb-2 border-b-2 section-border">
                        üõí Compra en Comercio
                    </h2>

                    <div class="space-y-4">
                        <div>
                            <label for="cuitLocal" class="block text-sm font-semibold text-gray-700 mb-2">
                                CUIT del Comercio *
                            </label>
                            <input type="text" id="cuitLocal" name="cuitLocal" placeholder="20-12345678-9"
                                pattern="[0-9]{2}-[0-9]{8}-[0-9]{1}" maxlength="13"
                                class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                            <p class="text-xs text-gray-500 mt-1">Formato: XX-XXXXXXXX-X</p>
                        </div>

                        <div>
                            <label for="nroComprobante" class="block text-sm font-semibold text-gray-700 mb-2">
                                N√∫mero de Ticket o Factura *
                            </label>
                            <input type="text" id="nroComprobante" name="nroComprobante" placeholder="0001-00000001"
                                pattern="[0-9]{4}-[0-9]{8}" maxlength="13"
                                class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                            <p class="text-xs text-gray-500 mt-1">Formato: XXXX-XXXXXXXX (4 d√≠gitos - 8 d√≠gitos)</p>
                        </div>

                        <div>
                            <label for="monto" class="block text-sm font-semibold text-gray-700 mb-2">
                                Monto Total de la Compra *
                            </label>
                            <div class="relative">
                                <span class="absolute left-4 top-3 text-gray-600 font-semibold">$</span>
                                <input type="number" id="monto" name="monto" min="25000" step="0.01" placeholder="25000"
                                    class="input-field w-full pl-8 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Monto m√≠nimo para participar: $25.000</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                Medio de Pago *
                            </label>
                            <div class="space-y-3">
                                <div
                                    class="flex items-center p-4 border-2 border-gray-300 rounded-lg hover:border-blue-400 transition-colors">
                                    <input type="radio" id="medioPagoBancor" name="medioPago" value="bancor"
                                        class="mr-3" style="width: 20px; height: 20px;">
                                    <label for="medioPagoBancor" class="text-gray-700 cursor-pointer font-medium">
                                        üí≥ Bancor
                                    </label>
                                </div>
                                <div
                                    class="flex items-center p-4 border-2 border-gray-300 rounded-lg hover:border-blue-400 transition-colors">
                                    <input type="radio" id="medioPagoOtros" name="medioPago" value="otros" class="mr-3"
                                        style="width: 20px; height: 20px;">
                                    <label for="medioPagoOtros" class="text-gray-700 cursor-pointer font-medium">
                                        üí∞ Otros
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label for="ticketComercio" class="block text-sm font-semibold text-gray-700 mb-2">
                                Foto del Ticket o Factura *
                            </label>
                            <div class="relative">
                                <input type="file" id="ticketComercio" name="ticketComercio" accept="image/*"
                                    class="hidden" onchange="updateFileName(this, 'fileNameComercio')" />
                                <label for="ticketComercio"
                                    class="input-field cursor-pointer flex items-center justify-center w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50">
                                    <svg class="w-6 h-6 text-gray-400 mr-2" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z">
                                        </path>
                                    </svg>
                                    <span id="fileNameComercio" class="text-gray-600">Hac√© clic para subir tu
                                        comprobante...</span>
                                </label>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Aceptamos JPG, PNG o WebP (m√°ximo 8 MB)</p>
                        </div>
                    </div>
                </div>

                <!-- Datos del Comprador -->
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-blue-900 mb-4 pb-2 border-b-2 section-border">
                        üë§ Tus Datos Personales
                    </h2>

                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="nombre" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Nombre *
                                </label>
                                <input type="text" id="nombre" name="nombre" required placeholder="Juan"
                                    class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="apellido" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Apellido *
                                </label>
                                <input type="text" id="apellido" name="apellido" required placeholder="P√©rez"
                                    class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                            </div>
                        </div>

                        <div>
                            <label for="dni" class="block text-sm font-semibold text-gray-700 mb-2">
                                N√∫mero de DNI *
                            </label>
                            <input type="text" id="dni" name="dni" required placeholder="12345678" pattern="[0-9]{7,8}"
                                maxlength="8"
                                class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                            <p class="text-xs text-gray-500 mt-1">7 u 8 d√≠gitos num√©ricos, sin puntos ni espacios</p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                G√©nero *
                            </label>
                            <div class="flex space-x-6">
                                <label class="flex items-center cursor-pointer">
                                    <input type="radio" name="sexo" value="M" required class="mr-2"
                                        style="width: 20px; height: 20px;">
                                    <span class="text-gray-700">Masculino</span>
                                </label>
                                <label class="flex items-center cursor-pointer">
                                    <input type="radio" name="sexo" value="F" required class="mr-2"
                                        style="width: 20px; height: 20px;">
                                    <span class="text-gray-700">Femenino</span>
                                </label>
                            </div>
                        </div>

                        <div>
                            <label for="fechaNacimiento" class="block text-sm font-semibold text-gray-700 mb-2">
                                Fecha de Nacimiento *
                            </label>
                            <input type="date" id="fechaNacimiento" name="fechaNacimiento" required max="2007-12-09"
                                class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                            <p class="text-xs text-gray-500 mt-1">Deb√©s ser mayor de 18 a√±os (nacido/a antes del
                                09/12/2007)</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="md:col-span-1">
                                <label for="codigoArea" class="block text-sm font-semibold text-gray-700 mb-2">
                                    C√≥digo de √Årea *
                                </label>
                                <input type="text" id="codigoArea" name="codigoArea" required placeholder="351"
                                    pattern="[0-9]{2,4}" maxlength="4"
                                    class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                                <p class="text-xs text-gray-500 mt-1">Ej: 351</p>
                            </div>

                            <div class="md:col-span-2">
                                <label for="telefono" class="block text-sm font-semibold text-gray-700 mb-2">
                                    N√∫mero de Tel√©fono *
                                </label>
                                <input type="text" id="telefono" name="telefono" required placeholder="1234567"
                                    pattern="[0-9]{6,8}" maxlength="8"
                                    class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                                <p class="text-xs text-gray-500 mt-1">Sin el 15 ni guiones</p>
                            </div>
                        </div>

                        <div>
                            <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
                                Correo Electr√≥nico *
                            </label>
                            <input type="email" id="email" name="email" required placeholder="tucorreo@ejemplo.com"
                                class="input-field w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" />
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <button type="submit" id="submitBtn"
                    class="btn-submit w-full text-white font-bold py-4 px-6 rounded-lg text-lg">
                    üéâ Enviar mi Participaci√≥n
                </button>

                <!-- Contact Button -->
                <button type="button" id="contactBtn"
                    class="w-full text-blue-900 font-semibold py-3 px-6 rounded-lg text-base border-2 border-blue-900 hover:bg-blue-50 transition-all mt-4">
                    üìß Si no puede enviar correctamente sus datos cont√°ctese con nosotros
                </button>
            </form>
        </div>

        <!-- Response Container -->
        <div id="responseContainer" class="hidden fade-in"></div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3 class="loading-text">Enviando tu participaci√≥n...</h3>
            <p class="loading-subtext">Por favor, esper√° un momento</p>
        </div>
    </div>

    <script>
        // Modal de premios (se muestra primero)
        const prizesModal = document.getElementById('prizesModal');
        const continuePrizesBtn = document.getElementById('continuePrizesBtn');

        // Modal de t√©rminos y condiciones (se muestra segundo)
        const termsModal = document.getElementById('termsModal');
        const mayorEdadCheck = document.getElementById('mayorEdadCheck');
        const terminosCheck = document.getElementById('terminosCheck');
        const acceptTermsBtn = document.getElementById('acceptTermsBtn');

        // Cerrar modal de premios y mostrar t√©rminos
        continuePrizesBtn.addEventListener('click', function () {
            prizesModal.classList.add('modal-hidden');
            termsModal.classList.remove('modal-hidden');
        });

        // Habilitar bot√≥n s√≥lo cuando ambos checkboxes est√©n marcados
        function updateAcceptButton() {
            if (mayorEdadCheck.checked && terminosCheck.checked) {
                acceptTermsBtn.disabled = false;
            } else {
                acceptTermsBtn.disabled = true;
            }
        }

        mayorEdadCheck.addEventListener('change', updateAcceptButton);
        terminosCheck.addEventListener('change', updateAcceptButton);

        // Cerrar modal de t√©rminos al aceptar
        acceptTermsBtn.addEventListener('click', function () {
            termsModal.classList.add('modal-hidden');
        });

        // Modal de ayuda para n√∫mero de agencia
        const agenciaHelpModal = document.getElementById('agenciaHelpModal');
        const agenciaHelpIcon = document.getElementById('agenciaHelpIcon');
        const closeAgenciaHelpBtn = document.getElementById('closeAgenciaHelpBtn');

        // Abrir modal de ayuda de agencia
        agenciaHelpIcon.addEventListener('click', function () {
            agenciaHelpModal.classList.remove('modal-hidden');
        });

        // Cerrar modal de ayuda de agencia
        closeAgenciaHelpBtn.addEventListener('click', function () {
            agenciaHelpModal.classList.add('modal-hidden');
        });

        // Modal de ayuda para OCR
        const ocrHelpModal = document.getElementById('ocrHelpModal');
        const ocrHelpIcon = document.getElementById('ocrHelpIcon');
        const closeOcrHelpBtn = document.getElementById('closeOcrHelpBtn');

        // Abrir modal de ayuda de OCR
        ocrHelpIcon.addEventListener('click', function () {
            ocrHelpModal.classList.remove('modal-hidden');
        });

        // Cerrar modal de ayuda de OCR
        closeOcrHelpBtn.addEventListener('click', function () {
            ocrHelpModal.classList.add('modal-hidden');
        });

        // Handle purchase type selection
        const radioAgencia = document.querySelector('input[value="agencia"]');
        const radioComercio = document.querySelector('input[value="comercio"]');
        const seccionAgencia = document.getElementById('seccionAgencia');
        const seccionComercio = document.getElementById('seccionComercio');

        // Radio card styling
        document.querySelectorAll('input[name="tipoCompra"]').forEach(radio => {
            radio.addEventListener('change', function () {
                // Update card styles
                document.getElementById('radioAgencia').classList.remove('selected');
                document.getElementById('radioComercio').classList.remove('selected');

                if (this.value === 'agencia') {
                    document.getElementById('radioAgencia').classList.add('selected');
                    seccionAgencia.classList.remove('hidden');
                    seccionComercio.classList.add('hidden');

                    // Set required fields for agencia
                    document.getElementById('ocr').required = true;
                    document.getElementById('nroSucursal').required = true;
                    document.getElementById('nroAgencia').required = true;
                    document.getElementById('montoAgencia').required = true;
                    // ticketAgencia is validated manually in submit handler

                    // Remove required from comercio
                    document.getElementById('cuitLocal').required = false;
                    document.getElementById('nroComprobante').required = false;
                    document.getElementById('monto').required = false;
                    // ticketComercio is validated manually in submit handler
                } else {
                    document.getElementById('radioComercio').classList.add('selected');
                    seccionComercio.classList.remove('hidden');
                    seccionAgencia.classList.add('hidden');

                    // Set required fields for comercio
                    document.getElementById('cuitLocal').required = true;
                    document.getElementById('nroComprobante').required = true;
                    document.getElementById('monto').required = true;
                    // ticketComercio is validated manually in submit handler

                    // Remove required from agencia
                    document.getElementById('ocr').required = false;
                    document.getElementById('nroSucursal').required = false;
                    document.getElementById('nroAgencia').required = false;
                    document.getElementById('montoAgencia').required = false;
                    // ticketAgencia is validated manually in submit handler
                }
            });
        });

        // Update file name display with size validation
        function updateFileName(input, spanId) {
            const file = input.files[0];
            const maxSize = 8 * 1024 * 1024; // 8MB in bytes

            if (!file) {
                document.getElementById(spanId).textContent = 'Hac√© clic para subir tu comprobante...';
                return;
            }

            // Check file size
            if (file.size > maxSize) {
                // Show error alert
                alert('‚ö†Ô∏è ARCHIVO MUY GRANDE\n\nLa imagen que intent√°s subir supera el tama√±o m√°ximo permitido.\n\nTama√±o del archivo: ' + (file.size / 1024 / 1024).toFixed(2) + ' MB\nTama√±o m√°ximo: 8 MB\n\nPor favor, seleccion√° una imagen m√°s peque√±a o comprim√≠ la foto antes de subirla.');

                // Clear the file input
                input.value = '';
                document.getElementById(spanId).textContent = 'Hac√© clic para subir tu comprobante...';

                // Highlight the label with red border
                const label = document.querySelector(`label[for="${input.id}"]`);
                if (label) {
                    label.style.borderColor = '#ef4444';
                    label.style.backgroundColor = '#fee2e2';
                    label.style.animation = 'shake 0.5s';

                    // Remove highlight after 3 seconds
                    setTimeout(() => {
                        label.style.borderColor = '';
                        label.style.backgroundColor = '';
                        label.style.animation = '';
                    }, 3000);
                }

                return;
            }

            // File is valid, show the name
            document.getElementById(spanId).textContent = file.name;
        }

        // Format CUIT del Local automatically
        document.getElementById('cuitLocal').addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, ''); // Remove non-digits

            if (value.length > 11) {
                value = value.substring(0, 11);
            }

            let formatted = '';
            if (value.length > 0) {
                formatted = value.substring(0, 2);
                if (value.length > 2) {
                    formatted += '-' + value.substring(2, 10);
                    if (value.length > 10) {
                        formatted += '-' + value.substring(10, 11);
                    }
                }
            }

            e.target.value = formatted;
        });

        // Format N√∫mero de Comprobante automatically
        document.getElementById('nroComprobante').addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, ''); // Remove non-digits

            if (value.length > 12) {
                value = value.substring(0, 12);
            }

            let formatted = '';
            if (value.length > 0) {
                formatted = value.substring(0, 4);
                if (value.length > 4) {
                    formatted += '-' + value.substring(4, 12);
                }
            }

            e.target.value = formatted;
        });

        // Only allow numbers in numeric fields
        ['ocr', 'nroSucursal', 'nroAgencia', 'dni', 'codigoArea', 'telefono'].forEach(id => {
            document.getElementById(id).addEventListener('input', function (e) {
                e.target.value = e.target.value.replace(/\D/g, '');
            });
        });

        // Handle form submission
        document.getElementById('purchaseForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const submitBtn = document.getElementById('submitBtn');
            const responseContainer = document.getElementById('responseContainer');

            // Check if purchase type is selected
            const tipoCompra = document.querySelector('input[name="tipoCompra"]:checked');
            if (!tipoCompra) {
                alert('Por favor, seleccion√° si compraste en Agencia o en Comercio');
                return;
            }

            // Validate birth date (must be 18+ years old)
            const fechaNacimiento = document.getElementById('fechaNacimiento').value;
            if (fechaNacimiento) {
                const maxDate = new Date('2007-12-09');
                const birthDate = new Date(fechaNacimiento);

                if (birthDate > maxDate) {
                    alert('‚ö†Ô∏è FECHA NO V√ÅLIDA\n\nDeb√©s ser mayor de 18 a√±os para participar del sorteo.\n\nLa fecha de nacimiento debe ser el 09/12/2007 o anterior.');

                    // Scroll to the birth date field and highlight it
                    const fechaInput = document.getElementById('fechaNacimiento');
                    fechaInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    fechaInput.style.borderColor = '#ef4444';
                    fechaInput.style.backgroundColor = '#fee2e2';

                    // Remove highlight after 3 seconds
                    setTimeout(() => {
                        fechaInput.style.borderColor = '';
                        fechaInput.style.backgroundColor = '';
                    }, 3000);

                    return;
                }
            }

            // Validate agencia section
            if (tipoCompra.value === 'agencia') {
                // Validate OCR
                const ocr = document.getElementById('ocr').value;
                if (!ocr || ocr.length !== 16) {
                    alert('Por favor, ingres√° el N√∫mero OCR completo (16 d√≠gitos)');
                    return;
                }

                // Validate agency number
                const nroAgencia = document.getElementById('nroAgencia').value;
                if (!nroAgencia || nroAgencia.length < 1 || nroAgencia.length > 5) {
                    alert('Por favor, ingres√° el N√∫mero de Agencia (entre 1 y 5 d√≠gitos)');
                    return;
                }

                // Validate amount
                const montoAgencia = parseFloat(document.getElementById('montoAgencia').value);
                if (!montoAgencia || montoAgencia < 5000) {
                    alert('El monto de la apuesta debe ser mayor o igual a $5.000');
                    return;
                }

                // Validate image upload
                const ticketAgencia = document.getElementById('ticketAgencia').files[0];
                if (!ticketAgencia) {
                    alert('‚ö†Ô∏è FOTO REQUERIDA\n\nPor favor, sub√≠ la foto del ticket de agencia para poder participar del sorteo.\n\nRecord√° que es obligatorio adjuntar una imagen clara del ticket.');

                    // Scroll to the file input and highlight it
                    const fileLabel = document.querySelector('label[for="ticketAgencia"]');
                    fileLabel.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    fileLabel.style.borderColor = '#ef4444';
                    fileLabel.style.backgroundColor = '#fee2e2';
                    fileLabel.style.animation = 'shake 0.5s';

                    // Remove highlight after 3 seconds
                    setTimeout(() => {
                        fileLabel.style.borderColor = '';
                        fileLabel.style.backgroundColor = '';
                        fileLabel.style.animation = '';
                    }, 3000);

                    return;
                }

                // Validate file size (8MB max)
                const maxSize = 8 * 1024 * 1024; // 8MB in bytes
                if (ticketAgencia.size > maxSize) {
                    alert('‚ö†Ô∏è ARCHIVO MUY GRANDE\n\nLa imagen del ticket supera el tama√±o m√°ximo permitido.\n\nTama√±o del archivo: ' + (ticketAgencia.size / 1024 / 1024).toFixed(2) + ' MB\nTama√±o m√°ximo: 8 MB\n\nPor favor, seleccion√° una imagen m√°s peque√±a o comprim√≠ la foto antes de subirla.');

                    // Scroll to the file input and highlight it
                    const fileLabel = document.querySelector('label[for="ticketAgencia"]');
                    fileLabel.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    fileLabel.style.borderColor = '#ef4444';
                    fileLabel.style.backgroundColor = '#fee2e2';
                    fileLabel.style.animation = 'shake 0.5s';

                    // Remove highlight after 3 seconds
                    setTimeout(() => {
                        fileLabel.style.borderColor = '';
                        fileLabel.style.backgroundColor = '';
                        fileLabel.style.animation = '';
                    }, 3000);

                    return;
                }
            } else {
                // Validate comercio section
                // Validate CUIT
                const cuitLocal = document.getElementById('cuitLocal').value;
                if (!cuitLocal || cuitLocal.length !== 13) {
                    alert('Por favor, ingres√° el CUIT del Comercio completo (formato: XX-XXXXXXXX-X)');
                    return;
                }

                // Validate ticket number
                const nroComprobante = document.getElementById('nroComprobante').value;
                if (!nroComprobante || nroComprobante.length !== 13) {
                    alert('Por favor, ingres√° el N√∫mero de Ticket o Factura completo (formato: XXXX-XXXXXXXX)');
                    return;
                }

                // Validate amount
                const montoComercio = parseFloat(document.getElementById('monto').value);
                if (!montoComercio || montoComercio < 25000) {
                    alert('El monto de la compra debe ser mayor o igual a $25.000');
                    return;
                }

                // Validate payment method
                const medioPago = document.querySelector('input[name="medioPago"]:checked');
                if (!medioPago) {
                    alert('‚ö†Ô∏è MEDIO DE PAGO REQUERIDO\n\nPor favor, seleccion√° un medio de pago (Bancor u Otros) para continuar.\n\nRecord√° que si pagaste con Bancor ten√©s doble chance de ganar.');

                    // Scroll to payment method section and highlight it
                    const medioPagoSection = document.querySelector('input[name="medioPago"]').closest('.space-y-3');
                    if (medioPagoSection) {
                        medioPagoSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        medioPagoSection.style.animation = 'shake 0.5s';

                        // Highlight both payment options
                        const paymentOptions = medioPagoSection.querySelectorAll('.flex.items-center');
                        paymentOptions.forEach(option => {
                            option.style.borderColor = '#ef4444';
                            option.style.backgroundColor = '#fee2e2';
                        });

                        // Remove highlight after 3 seconds
                        setTimeout(() => {
                            medioPagoSection.style.animation = '';
                            paymentOptions.forEach(option => {
                                option.style.borderColor = '';
                                option.style.backgroundColor = '';
                            });
                        }, 3000);
                    }

                    return;
                }

                // Validate image upload
                const ticketComercio = document.getElementById('ticketComercio').files[0];
                if (!ticketComercio) {
                    alert('‚ö†Ô∏è FOTO REQUERIDA\n\nPor favor, sub√≠ la foto del ticket o factura para poder participar del sorteo.\n\nRecord√° que es obligatorio adjuntar una imagen clara del comprobante de compra.');

                    // Scroll to the file input and highlight it
                    const fileLabel = document.querySelector('label[for="ticketComercio"]');
                    fileLabel.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    fileLabel.style.borderColor = '#ef4444';
                    fileLabel.style.backgroundColor = '#fee2e2';
                    fileLabel.style.animation = 'shake 0.5s';

                    // Remove highlight after 3 seconds
                    setTimeout(() => {
                        fileLabel.style.borderColor = '';
                        fileLabel.style.backgroundColor = '';
                        fileLabel.style.animation = '';
                    }, 3000);

                    return;
                }

                // Validate file size (8MB max)
                const maxSize = 8 * 1024 * 1024; // 8MB in bytes
                if (ticketComercio.size > maxSize) {
                    alert('‚ö†Ô∏è ARCHIVO MUY GRANDE\n\nLa imagen del ticket/factura supera el tama√±o m√°ximo permitido.\n\nTama√±o del archivo: ' + (ticketComercio.size / 1024 / 1024).toFixed(2) + ' MB\nTama√±o m√°ximo: 8 MB\n\nPor favor, seleccion√° una imagen m√°s peque√±a o comprim√≠ la foto antes de subirla.');

                    // Scroll to the file input and highlight it
                    const fileLabel = document.querySelector('label[for="ticketComercio"]');
                    fileLabel.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    fileLabel.style.borderColor = '#ef4444';
                    fileLabel.style.backgroundColor = '#fee2e2';
                    fileLabel.style.animation = 'shake 0.5s';

                    // Remove highlight after 3 seconds
                    setTimeout(() => {
                        fileLabel.style.borderColor = '';
                        fileLabel.style.backgroundColor = '';
                        fileLabel.style.animation = '';
                    }, 3000);

                    return;
                }
            }

            // Show loading overlay
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.classList.remove('hidden');
            submitBtn.disabled = true;
            responseContainer.classList.add('hidden');

            try {
                // Get gender value
                const genero = document.querySelector('input[name="sexo"]:checked')?.value || '';

                // Build the JSON according to backend schema
                const jsonData = {
                    tipo: tipoCompra.value, // "agencia" o "comercio"
                    persona: {
                        apellido: document.getElementById('apellido').value,
                        codigo_area: document.getElementById('codigoArea').value,
                        correo_electronico: document.getElementById('email').value,
                        dni: document.getElementById('dni').value,

                        fecha_nacimiento: document.getElementById('fechaNacimiento').value,
                        nombre: document.getElementById('nombre').value,
                        genero: genero,
                        telefono: document.getElementById('telefono').value
                    }
                };

                // Add agencia or compra_comercio based on tipo
                if (tipoCompra.value === 'agencia') {
                    const fileInput = document.getElementById('ticketAgencia');
                    const file = fileInput.files[0];
                    let base64Image = '';
                    let imageType = '';

                    if (file) {
                        base64Image = await fileToBase64(file);
                        imageType = file.type;
                    }

                    jsonData.agencia = {

                        foto_ticket: base64Image,
                        foto_tipo: imageType,
                        id_persona: '', // Se puede completar en el backend si es necesario
                        monto_apuesta: document.getElementById('montoAgencia').value.toString(),
                        nro_agencia: document.getElementById('nroAgencia').value,
                        nro_sucursal: document.getElementById('nroSucursal').value,
                        ocr: document.getElementById('ocr').value
                    };


                } else {
                    const fileInput = document.getElementById('ticketComercio');
                    const file = fileInput.files[0];
                    let base64Image = '';
                    let imageType = '';

                    if (file) {
                        base64Image = await fileToBase64(file);
                        imageType = file.type;
                    }

                    const medioPago = document.querySelector('input[name="medioPago"]:checked');

                    jsonData.compra_comercio = {
                        cuit_comercio: document.getElementById('cuitLocal').value,

                        foto_ticket_factura: base64Image,
                        foto_ticket_factura_tipo: imageType,
                        id_persona: '', // Se puede completar en el backend si es necesario
                        medio_pago: medioPago ? medioPago.value : '',
                        monto_total_compra: document.getElementById('monto').value.toString(),
                        numero_ticket_factura: document.getElementById('nroComprobante').value
                    };


                }

                // Log JSON to console for verification
                console.log('Datos a enviar:', JSON.stringify(jsonData, null, 2));

                // Send to Power Automate
                const response = await fetch('https://default4ff172a4c9ce49b0b39d8f0bd292c0.42.environment.api.powerplatform.com/powerautomate/automations/direct/workflows/086daf758a8b42739f70ac64a995c20a/triggers/manual/paths/invoke?api-version=1&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=IQB14siZevuLtO31WjZyvy4bove60j0oYJckZpLXFUM', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(jsonData)
                });

                // Handle response
                let result;
                const contentType = response.headers.get('content-type');

                if (contentType && contentType.includes('application/json')) {
                    result = await response.json();
                } else {
                    result = await response.text();
                }

                // Check for error status codes (400 and 500)
                if (response.status === 400 || response.status === 500) {
                    // Extract mensaje property from JSON response
                    const errorMessage = (typeof result === 'object' && result.mensaje)
                        ? result.mensaje
                        : 'Ocurri√≥ un error al procesar tu solicitud';
                    showResponse(false, errorMessage, response.status);
                } else if (response.ok) {
                    // Show success message
                    showResponse(true, result, response.status);

                    // Reset form on success
                    document.getElementById('purchaseForm').reset();
                    document.getElementById('fileNameAgencia').textContent = 'Hac√© clic para subir tu ticket...';
                    document.getElementById('fileNameComercio').textContent = 'Hac√© clic para subir tu comprobante...';
                    seccionAgencia.classList.add('hidden');
                    seccionComercio.classList.add('hidden');
                    document.getElementById('radioAgencia').classList.remove('selected');
                    document.getElementById('radioComercio').classList.remove('selected');
                } else {
                    // Handle other error codes
                    const errorMessage = (typeof result === 'object' && result.mensaje)
                        ? result.mensaje
                        : `Error ${response.status}: ${response.statusText}`;
                    showResponse(false, errorMessage, response.status);
                }

            } catch (error) {
                console.error('Error:', error);
                showResponse(false, error.message);
            } finally {
                // Hide loading overlay and re-enable button
                loadingOverlay.classList.add('hidden');
                submitBtn.disabled = false;
            }
        });

        // Convert file to base64
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => {
                    // Remove the data:image/xxx;base64, prefix
                    const base64 = reader.result.split(',')[1];
                    resolve(base64);
                };
                reader.onerror = error => reject(error);
            });
        }

        // Show response message in modal
        function showResponse(success, data, statusCode) {
            const icon = success ? '‚úÖ' : '‚ùå';
            const title = success ? '¬°Tu participaci√≥n fue registrada!' : 'Hubo un problema';

            // Extract message from response if it's a success with status 200
            let message = '';
            if (success && statusCode === 200 && typeof data === 'object' && data.mensaje) {
                message = data.mensaje;
            } else if (typeof data === 'object') {
                message = JSON.stringify(data, null, 2);
            } else {
                message = data;
            }

            // Create modal HTML
            const modalHTML = `
                <div class="modal-overlay" id="responseModal">
                    <div class="modal-content">
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">${icon}</div>
                            <h2 class="text-3xl font-bold text-blue-900 mb-2">${title}</h2>
                            ${success && statusCode === 200 ? `
                                <div class="bg-green-50 p-6 rounded-lg mb-6">
                                    <p class="text-gray-700 text-lg">${message}</p>
                                    <p class="text-gray-700 mt-4 font-semibold">¬°Muchas gracias por participar! Te contactaremos en caso de resultar ganador/a.</p>
                                </div>
                            ` : `
                                <div class="bg-red-50 p-6 rounded-lg mb-6">
                                    <p class="text-gray-700">${message}</p>
                                    <p class="text-gray-700 mt-4 font-semibold">Por favor, revis√° los datos e intent√° nuevamente.</p>
                                </div>
                            `}
                        </div>
                        <button onclick="closeResponseModal()" class="btn-accept w-full text-white font-bold py-4 px-6 rounded-lg text-lg">
                            Cerrar
                        </button>
                    </div>
                </div>
            `;

            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        // Close response modal and restart the form
        function closeResponseModal() {
            const modal = document.getElementById('responseModal');
            if (modal) {
                modal.remove();
            }

            // Reset the form
            document.getElementById('purchaseForm').reset();
            document.getElementById('fileNameAgencia').textContent = 'Hac√© clic para subir tu ticket...';
            document.getElementById('fileNameComercio').textContent = 'Hac√© clic para subir tu comprobante...';

            // Hide both sections
            document.getElementById('seccionAgencia').classList.add('hidden');
            document.getElementById('seccionComercio').classList.add('hidden');

            // Remove selected class from radio cards
            document.getElementById('radioAgencia').classList.remove('selected');
            document.getElementById('radioComercio').classList.remove('selected');

            // Uncheck terms and conditions checkboxes
            document.getElementById('mayorEdadCheck').checked = false;
            document.getElementById('terminosCheck').checked = false;

            // Show the prizes modal again
            document.getElementById('prizesModal').classList.remove('modal-hidden');

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Handle contact button click
        document.getElementById('contactBtn').addEventListener('click', function () {
            // Get form data
            const tipoCompra = document.querySelector('input[name="tipoCompra"]:checked');
            const genero = document.querySelector('input[name="sexo"]:checked');

            // Build email body with form data
            let emailBody = 'DATOS DEL FORMULARIO - EL CENTRO EST√Å DE FIESTA\n\n';
            emailBody += '=== DATOS PERSONALES ===\n';
            emailBody += `Nombre: ${document.getElementById('nombre').value || 'No ingresado'}\n`;
            emailBody += `Apellido: ${document.getElementById('apellido').value || 'No ingresado'}\n`;
            emailBody += `DNI: ${document.getElementById('dni').value || 'No ingresado'}\n`;
            emailBody += `G√©nero: ${genero ? (genero.value === 'M' ? 'Masculino' : 'Femenino') : 'No seleccionado'}\n`;
            emailBody += `Fecha de Nacimiento: ${document.getElementById('fechaNacimiento').value || 'No ingresada'}\n`;
            emailBody += `C√≥digo de √Årea: ${document.getElementById('codigoArea').value || 'No ingresado'}\n`;
            emailBody += `Tel√©fono: ${document.getElementById('telefono').value || 'No ingresado'}\n`;
            emailBody += `Email: ${document.getElementById('email').value || 'No ingresado'}\n\n`;

            emailBody += '=== TIPO DE COMPRA ===\n';
            emailBody += `Tipo: ${tipoCompra ? (tipoCompra.value === 'agencia' ? 'Agencia' : 'Comercio') : 'No seleccionado'}\n\n`;

            if (tipoCompra && tipoCompra.value === 'agencia') {
                emailBody += '=== DATOS DE AGENCIA ===\n';
                emailBody += `N√∫mero OCR: ${document.getElementById('ocr').value || 'No ingresado'}\n`;
                emailBody += `N√∫mero de Sucursal: ${document.getElementById('nroSucursal').value || 'No ingresado'}\n`;
                emailBody += `N√∫mero de Agencia: ${document.getElementById('nroAgencia').value || 'No ingresado'}\n`;
                emailBody += `Monto de Apuesta: $${document.getElementById('montoAgencia').value || 'No ingresado'}\n`;
                const ticketAgencia = document.getElementById('ticketAgencia').files[0];
                emailBody += `Foto del Ticket: ${ticketAgencia ? ticketAgencia.name : 'No adjuntada (deber√° adjuntarla al email)'}\n`;
            } else if (tipoCompra && tipoCompra.value === 'comercio') {
                emailBody += '=== DATOS DE COMERCIO ===\n';
                emailBody += `CUIT del Comercio: ${document.getElementById('cuitLocal').value || 'No ingresado'}\n`;
                emailBody += `N√∫mero de Ticket/Factura: ${document.getElementById('nroComprobante').value || 'No ingresado'}\n`;
                emailBody += `Monto Total: $${document.getElementById('monto').value || 'No ingresado'}\n`;
                const medioPago = document.querySelector('input[name="medioPago"]:checked');
                emailBody += `Medio de Pago: ${medioPago ? (medioPago.value === 'bancor' ? 'Bancor' : 'Otros') : 'No seleccionado'}\n`;
                const ticketComercio = document.getElementById('ticketComercio').files[0];
                emailBody += `Foto del Ticket/Factura: ${ticketComercio ? ticketComercio.name : 'No adjuntada (deber√° adjuntarla al email)'}\n`;
            }

            emailBody += '\n\nNOTA: Si adjunt√≥ una foto del ticket/factura en el formulario, por favor adj√∫ntela tambi√©n a este email.\n';

            // Show modal with email data
            showContactModal(emailBody);
        });

        // Show contact modal with email data
        function showContactModal(emailBody) {
            const subject = 'Formulario EL CENTRO EST√Å DE FIESTA';
            const emailAddress = 'mesadeayuda@loteriacba.com.ar';

            // Create modal HTML
            const modalHTML = `
                <div class="modal-overlay" id="contactModal">
                    <div class="modal-content" style="max-width: 700px;">
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">üìß</div>
                            <h2 class="text-3xl font-bold text-blue-900 mb-2">Contacto por Email</h2>
                            <p class="text-gray-600">Copi√° los datos y envialos por correo electr√≥nico</p>
                        </div>

                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <p class="text-sm font-semibold text-blue-900 mb-2">üìÆ Destinatario:</p>
                            <div class="flex items-center gap-2">
                                <input type="text" id="emailAddressField" value="${emailAddress}" readonly 
                                    class="flex-1 px-3 py-2 border-2 border-blue-300 rounded bg-white text-gray-700 font-mono text-sm">
                                <button onclick="copyToClipboard('emailAddressField', this)" 
                                    class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm font-semibold">
                                    üìã Copiar
                                </button>
                            </div>
                        </div>

                        <div class="bg-green-50 p-4 rounded-lg mb-4">
                            <p class="text-sm font-semibold text-green-900 mb-2">üìù Asunto:</p>
                            <div class="flex items-center gap-2">
                                <input type="text" id="emailSubjectField" value="${subject}" readonly 
                                    class="flex-1 px-3 py-2 border-2 border-green-300 rounded bg-white text-gray-700 text-sm">
                                <button onclick="copyToClipboard('emailSubjectField', this)" 
                                    class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-sm font-semibold">
                                    üìã Copiar
                                </button>
                            </div>
                        </div>

                        <div class="bg-gray-50 p-4 rounded-lg mb-6">
                            <p class="text-sm font-semibold text-gray-900 mb-2">üí¨ Mensaje:</p>
                            <textarea id="emailBodyField" readonly 
                                class="w-full px-3 py-2 border-2 border-gray-300 rounded bg-white text-gray-700 font-mono text-xs h-64 mb-2">${emailBody}</textarea>
                            <button onclick="copyToClipboard('emailBodyField', this)" 
                                class="w-full px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors text-sm font-semibold">
                                üìã Copiar Mensaje
                            </button>
                        </div>

                        <div class="space-y-3">
                            <a href="mailto:${emailAddress}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}" 
                                class="block w-full text-center px-6 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-lg font-bold">
                                üìß Abrir en mi Cliente de Correo
                            </a>
                            <button onclick="closeContactModal()" 
                                class="w-full px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-semibold">
                                Cerrar
                            </button>
                        </div>

                        <div class="mt-4 p-3 bg-yellow-50 border-2 border-yellow-300 rounded-lg">
                            <p class="text-xs text-yellow-800">
                                üí° <strong>Tip:</strong> Si el bot√≥n "Abrir en mi Cliente de Correo" no funciona, pod√©s copiar manualmente el destinatario, asunto y mensaje usando los botones de copiar, y luego pegarlos en tu aplicaci√≥n de correo (Gmail, Outlook, etc.)
                            </p>
                        </div>
                    </div>
                </div>
            `;

            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        // Copy to clipboard function
        function copyToClipboard(elementId, button) {
            const element = document.getElementById(elementId);
            element.select();
            element.setSelectionRange(0, 99999); // For mobile devices

            try {
                document.execCommand('copy');
                const originalText = button.innerHTML;
                button.innerHTML = '‚úÖ Copiado!';
                button.style.backgroundColor = '#10b981';

                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.style.backgroundColor = '';
                }, 2000);
            } catch (err) {
                alert('No se pudo copiar autom√°ticamente. Por favor, seleccion√° y copi√° manualmente.');
            }
        }

        // Close contact modal
        function closeContactModal() {
            const modal = document.getElementById('contactModal');
            if (modal) {
                modal.remove();
            }
        }


        // Convert file to base64
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => {
                    // Remove the data:image/xxx;base64, prefix
                    const base64 = reader.result.split(',')[1];
                    resolve(base64);
                };
                reader.onerror = error => reject(error);
            });
        }

        // Show response message in modal
        function showResponse(success, data, statusCode) {
            const icon = success ? '‚úÖ' : '‚ùå';
            const title = success ? '¬°Tu participaci√≥n fue registrada!' : 'Hubo un problema';

            // Extract message from response if it's a success with status 200
            let message = '';
            if (success && statusCode === 200 && typeof data === 'object' && data.mensaje) {
                message = data.mensaje;
            } else if (typeof data === 'object') {
                message = JSON.stringify(data, null, 2);
            } else {
                message = data;
            }

            // Create modal HTML
            const modalHTML = `
                <div class="modal-overlay" id="responseModal">
                    <div class="modal-content">
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">${icon}</div>
                            <h2 class="text-3xl font-bold text-blue-900 mb-2">${title}</h2>
                            ${success && statusCode === 200 ? `
                                <div class="bg-green-50 p-6 rounded-lg mb-6">
                                    <p class="text-gray-700 text-lg">${message}</p>
                                    <p class="text-gray-700 mt-4 font-semibold">¬°Muchas gracias por participar! Te contactaremos en caso de resultar ganador/a.</p>
                                </div>
                            ` : `
                                <div class="bg-red-50 p-6 rounded-lg mb-6">
                                    <p class="text-gray-700">${message}</p>
                                    <p class="text-gray-700 mt-4 font-semibold">Por favor, revis√° los datos e intent√° nuevamente.</p>
                                </div>
                            `}
                        </div>
                        <button onclick="closeResponseModal()" class="btn-accept w-full text-white font-bold py-4 px-6 rounded-lg text-lg">
                            Cerrar
                        </button>
                    </div>
                </div>
            `;

            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        // Close response modal and restart the form
        function closeResponseModal() {
            const modal = document.getElementById('responseModal');
            if (modal) {
                modal.remove();
            }

            // Reset the form
            document.getElementById('purchaseForm').reset();
            document.getElementById('fileNameAgencia').textContent = 'Hac√© clic para subir tu ticket...';
            document.getElementById('fileNameComercio').textContent = 'Hac√© clic para subir tu comprobante...';

            // Hide both sections
            document.getElementById('seccionAgencia').classList.add('hidden');
            document.getElementById('seccionComercio').classList.add('hidden');

            // Remove selected class from radio cards
            document.getElementById('radioAgencia').classList.remove('selected');
            document.getElementById('radioComercio').classList.remove('selected');

            // Uncheck terms and conditions checkboxes
            document.getElementById('mayorEdadCheck').checked = false;
            document.getElementById('terminosCheck').checked = false;

            // Show the prizes modal again
            document.getElementById('prizesModal').classList.remove('modal-hidden');

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Handle contact button click
        document.getElementById('contactBtn').addEventListener('click', function () {
            // Get form data
            const tipoCompra = document.querySelector('input[name="tipoCompra"]:checked');
            const genero = document.querySelector('input[name="sexo"]:checked');

            // Build email body with form data
            let emailBody = 'DATOS DEL FORMULARIO - EL CENTRO EST√Å DE FIESTA\n\n';
            emailBody += '=== DATOS PERSONALES ===\n';
            emailBody += `Nombre: ${document.getElementById('nombre').value || 'No ingresado'}\n`;
            emailBody += `Apellido: ${document.getElementById('apellido').value || 'No ingresado'}\n`;
            emailBody += `DNI: ${document.getElementById('dni').value || 'No ingresado'}\n`;
            emailBody += `G√©nero: ${genero ? (genero.value === 'M' ? 'Masculino' : 'Femenino') : 'No seleccionado'}\n`;
            emailBody += `Fecha de Nacimiento: ${document.getElementById('fechaNacimiento').value || 'No ingresada'}\n`;
            emailBody += `C√≥digo de √Årea: ${document.getElementById('codigoArea').value || 'No ingresado'}\n`;
            emailBody += `Tel√©fono: ${document.getElementById('telefono').value || 'No ingresado'}\n`;
            emailBody += `Email: ${document.getElementById('email').value || 'No ingresado'}\n\n`;

            emailBody += '=== TIPO DE COMPRA ===\n';
            emailBody += `Tipo: ${tipoCompra ? (tipoCompra.value === 'agencia' ? 'Agencia' : 'Comercio') : 'No seleccionado'}\n\n`;

            if (tipoCompra && tipoCompra.value === 'agencia') {
                emailBody += '=== DATOS DE AGENCIA ===\n';
                emailBody += `N√∫mero OCR: ${document.getElementById('ocr').value || 'No ingresado'}\n`;
                emailBody += `N√∫mero de Sucursal: ${document.getElementById('nroSucursal').value || 'No ingresado'}\n`;
                emailBody += `N√∫mero de Agencia: ${document.getElementById('nroAgencia').value || 'No ingresado'}\n`;
                emailBody += `Monto de Apuesta: $${document.getElementById('montoAgencia').value || 'No ingresado'}\n`;
                const ticketAgencia = document.getElementById('ticketAgencia').files[0];
                emailBody += `Foto del Ticket: ${ticketAgencia ? ticketAgencia.name : 'No adjuntada (deber√° adjuntarla al email)'}\n`;
            } else if (tipoCompra && tipoCompra.value === 'comercio') {
                emailBody += '=== DATOS DE COMERCIO ===\n';
                emailBody += `CUIT del Comercio: ${document.getElementById('cuitLocal').value || 'No ingresado'}\n`;
                emailBody += `N√∫mero de Ticket/Factura: ${document.getElementById('nroComprobante').value || 'No ingresado'}\n`;
                emailBody += `Monto Total: $${document.getElementById('monto').value || 'No ingresado'}\n`;
                const medioPago = document.querySelector('input[name="medioPago"]:checked');
                emailBody += `Medio de Pago: ${medioPago ? (medioPago.value === 'bancor' ? 'Bancor' : 'Otros') : 'No seleccionado'}\n`;
                const ticketComercio = document.getElementById('ticketComercio').files[0];
                emailBody += `Foto del Ticket/Factura: ${ticketComercio ? ticketComercio.name : 'No adjuntada (deber√° adjuntarla al email)'}\n`;
            }

            emailBody += '\n\nNOTA: Si adjunt√≥ una foto del ticket/factura en el formulario, por favor adj√∫ntela tambi√©n a este email.\n';

            // Show modal with email data
            showContactModal(emailBody);
        });

        // Show contact modal with email data
        function showContactModal(emailBody) {
            const subject = 'Formulario EL CENTRO EST√Å DE FIESTA';
            const emailAddress = 'mesadeayuda@loteriacba.com.ar';

            // Create modal HTML
            const modalHTML = `
                <div class="modal-overlay" id="contactModal">
                    <div class="modal-content" style="max-width: 700px;">
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">üìß</div>
                            <h2 class="text-3xl font-bold text-blue-900 mb-2">Contacto por Email</h2>
                            <p class="text-gray-600">Copi√° los datos y envialos por correo electr√≥nico</p>
                        </div>

                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <p class="text-sm font-semibold text-blue-900 mb-2">üìÆ Destinatario:</p>
                            <div class="flex items-center gap-2">
                                <input type="text" id="emailAddressField" value="${emailAddress}" readonly 
                                    class="flex-1 px-3 py-2 border-2 border-blue-300 rounded bg-white text-gray-700 font-mono text-sm">
                                <button onclick="copyToClipboard('emailAddressField', this)" 
                                    class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm font-semibold">
                                    üìã Copiar
                                </button>
                            </div>
                        </div>

                        <div class="bg-green-50 p-4 rounded-lg mb-4">
                            <p class="text-sm font-semibold text-green-900 mb-2">üìù Asunto:</p>
                            <div class="flex items-center gap-2">
                                <input type="text" id="emailSubjectField" value="${subject}" readonly 
                                    class="flex-1 px-3 py-2 border-2 border-green-300 rounded bg-white text-gray-700 text-sm">
                                <button onclick="copyToClipboard('emailSubjectField', this)" 
                                    class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-sm font-semibold">
                                    üìã Copiar
                                </button>
                            </div>
                        </div>

                        <div class="bg-gray-50 p-4 rounded-lg mb-6">
                            <p class="text-sm font-semibold text-gray-900 mb-2">üí¨ Mensaje:</p>
                            <textarea id="emailBodyField" readonly 
                                class="w-full px-3 py-2 border-2 border-gray-300 rounded bg-white text-gray-700 font-mono text-xs h-64 mb-2">${emailBody}</textarea>
                            <button onclick="copyToClipboard('emailBodyField', this)" 
                                class="w-full px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors text-sm font-semibold">
                                üìã Copiar Mensaje
                            </button>
                        </div>

                        <div class="space-y-3">
                            <a href="mailto:${emailAddress}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}" 
                                class="block w-full text-center px-6 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-lg font-bold">
                                üìß Abrir en mi Cliente de Correo
                            </a>
                            <button onclick="closeContactModal()" 
                                class="w-full px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-semibold">
                                Cerrar
                            </button>
                        </div>

                        <div class="mt-4 p-3 bg-yellow-50 border-2 border-yellow-300 rounded-lg">
                            <p class="text-xs text-yellow-800">
                                üí° <strong>Tip:</strong> Si el bot√≥n "Abrir en mi Cliente de Correo" no funciona, pod√©s copiar manualmente el destinatario, asunto y mensaje usando los botones de copiar, y luego pegarlos en tu aplicaci√≥n de correo (Gmail, Outlook, etc.)
                            </p>
                        </div>
                    </div>
                </div>
            `;

            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        // Copy to clipboard function
        function copyToClipboard(elementId, button) {
            const element = document.getElementById(elementId);
            element.select();
            element.setSelectionRange(0, 99999); // For mobile devices

            try {
                document.execCommand('copy');
                const originalText = button.innerHTML;
                button.innerHTML = '‚úÖ Copiado!';
                button.style.backgroundColor = '#10b981';

                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.style.backgroundColor = '';
                }, 2000);
            } catch (err) {
                alert('No se pudo copiar autom√°ticamente. Por favor, seleccion√° y copi√° manualmente.');
            }
        }

        // Close contact modal
        function closeContactModal() {
            const modal = document.getElementById('contactModal');
            if (modal) {
                modal.remove();
            }
        }

    </script>
</body>

</html>